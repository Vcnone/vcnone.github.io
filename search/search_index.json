{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Index"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"GithubPage/","text":"\u914d\u7f6eGithub \u767b\u5f55\u5230 GitHub \uff0c\u521b\u5efa\u65b0\u4ed3\u5e93\uff0c\u4ed3\u5e93\u540d\u5e94\u8be5\u4e3a\uff1a \u7528\u6237\u540d .github.io \u7528\u6237\u540d \u4e3aGitHub\u5e10\u53f7\u540d\uff0c\u8fd9\u662f\u56fa\u5b9a\u5199\u6cd5\u3002 \u5b89\u88c5Git \u4e0b\u8f7d\u5730\u5740\uff1a Git - Downloading Package \uff0c\u4e0b\u8f7d\u5b89\u88c5\u3002 \u5728\u547d\u4ee4\u884c\u91cc\u8f93\u5165 git --version \uff0c\u67e5\u770bgit\u7248\u672c\uff0c\u6d4b\u8bd5\u662f\u5426\u5b89\u88c5\u6210\u529f \u82e5\u5b89\u88c5\u5931\u8d25\uff0c\u89e3\u51b3git\u5b89\u88c5\u95ee\u9898\u3002 \u5ed6\u96ea\u5cf0 \u8001\u5e08\u7684 Git\u6559\u7a0b \u914d\u7f6eGit \u5168\u5c40\u914d\u7f6e git config --global user.name \"GitHub\u7528\u6237\u540d\" git config --global user.email \"GitHub\u6ce8\u518c\u90ae\u7bb1\" \u751f\u6210ssh\u5bc6\u94a5\u6587\u4ef6 ssh-keygen -t rsa -C \"GitHub\u6ce8\u518c\u90ae\u7bb1\" \u914d\u7f6essh\u5bc6\u94a5 \u6253\u5f00 GitHub_Settings_keys \u9875\u9762\uff0c\u65b0\u5efanew SSH Key\uff1b\u6216\u6253\u5f00\u4ed3\u5e93\u7684Deploy keys\u9875\u9762\uff0c\u65b0\u5efanew deploy key\uff1b \u5176\u4e2dTitle\u4e3a\u6807\u9898\uff0cKey\u586b\u751f\u6210\u7684id_rsa.pub\u4e2d\u5185\u5bb9 \u5728Git Bash\u4e2d\u68c0\u6d4bGitHub\u516c\u94a5\u8bbe\u7f6e\u662f\u5426\u6210\u529f\uff0c\u8f93\u5165 ssh git@github.com \uff1a PTY allocation request failed on channel 0 Hi *******! You've successfully authenticated, but GitHub does not provide shell access. Connection to github.com closed. \u5982\u4e0a\u5219\u8bf4\u660e\u6210\u529f\u3002 \u5b89\u88c5Node.js \u4e0b\u8f7d\u5730\u5740\uff1a Download | Node.js \uff0c\u4e0b\u8f7d\u5b89\u88c5\u3002\u6ce8\u610f\u5b89\u88c5Node.js\u4f1a\u5305\u542b \u73af\u5883\u53d8\u91cf \u53ca npm \u7684\u5b89\u88c5\u3002 \u5b89\u88c5\u540e\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165 node -v \uff0c\u68c0\u6d4bNode.js\u662f\u5426\u5b89\u88c5\u6210\u529f \uff1b\u8f93\u5165 npm -v \uff0c\u68c0\u6d4bnpm\u662f\u5426\u5b89\u88c5\u6210\u529f \u5b89\u88c5Hexo \u4ee5 Hexo \u4f5c\u4e3a\u4e2a\u4eba\u535a\u5ba2\u7f51\u7ad9\u7684\u6846\u67b6\u3002 \u4f7f\u7528npm\u547d\u4ee4\u5b89\u88c5Hexo\uff1a npm install hexo-cli -g \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u5728\u4e0a\u4e00\u7ea7\u76ee\u5f55 D:\\> \u521d\u59cb\u5316\u535a\u5ba2\uff0c\u53ef\u4ee5\u547d\u540d\u4e3ablog\uff0cHexo\u6846\u67b6\u4e0e\u4ee5\u540e\u53d1\u5e03\u7684\u7f51\u9875\u90fd\u5728\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e2d\u3002 hexo init blog \u751f\u6210\u5e76\u9884\u89c8\u535a\u5ba2 hexo g hexo s \u5e38\u7528\u7684Hexo \u547d\u4ee4 npm install hexo -g #\u5b89\u88c5Hexo npm update hexo -g #\u5347\u7ea7 hexo init #\u521d\u59cb\u5316\u535a\u5ba2 \u547d\u4ee4\u7b80\u5199 hexo n \"\u6211\u7684\u535a\u5ba2\" == hexo new \"\u6211\u7684\u535a\u5ba2\" #\u65b0\u5efa\u6587\u7ae0 hexo g == hexo generate #\u751f\u6210 hexo s == hexo server #\u542f\u52a8\u670d\u52a1\u9884\u89c8 hexo d == hexo deploy #\u90e8\u7f72 hexo server #Hexo\u4f1a\u76d1\u89c6\u6587\u4ef6\u53d8\u52a8\u5e76\u81ea\u52a8\u66f4\u65b0\uff0c\u65e0\u987b\u91cd\u542f\u670d\u52a1\u5668 hexo server -s #\u9759\u6001\u6a21\u5f0f hexo server -p 5000 #\u66f4\u6539\u7aef\u53e3 hexo server -i 192.168.1.1 #\u81ea\u5b9a\u4e49 IP hexo clean #\u6e05\u9664\u7f13\u5b58\uff0c\u82e5\u662f\u7f51\u9875\u6b63\u5e38\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5ffd\u7565\u8fd9\u6761\u547d\u4ee4 \u63a8\u9001\u7f51\u7ad9 blog\u6839\u76ee\u5f55\u91cc\u7684_config.yml\u6587\u4ef6\uff0c\u79f0\u4e3a \u7ad9\u70b9\u914d\u7f6e\u6587\u4ef6 \u6839\u76ee\u5f55\u91cc\u7684themes\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u4e5f\u6709\u4e2a_config.yml\u6587\u4ef6\uff0c\u79f0\u4e3a \u4e3b\u9898\u914d\u7f6e\u6587\u4ef6 \u5c06\u6211\u4eec\u7684Hexo\u4e0eGitHub\u5173\u8054\u8d77\u6765\uff0c\u6253\u5f00 \u7ad9\u70b9\u914d\u7f6e\u6587\u4ef6 _config.yml\uff0c\u7ffb\u5230\u6700\u540e\u4fee\u6539 deploy: type: git repo: \u5728GitHub\u4e0a\u521b\u5efa\u4ed3\u5e93\u7684\u5b8c\u6574\u8def\u5f84 branch: master \u5b89\u88c5Git\u90e8\u7f72\u63d2\u4ef6\uff0c\u8f93\u5165\u547d\u4ee4\uff1a npm install hexo-deployer-git --save \u6b64\u65f6\u751f\u6210\u5e76\u90e8\u7f72\u535a\u5ba2 hexo clean hexo g -d \u535a\u5ba2\u5c31\u88ab\u90e8\u7f72\u5230\uff1a \u7528\u6237\u540d .github.io \u7ed1\u5b9a\u57df\u540d \u57fa\u4e8e\u963f\u91cc\u4e91\uff0c\u5728 \u7ba1\u7406\u63a7\u5236\u53f0 \u8fdb\u5165 \u57df\u540d\u89e3\u6790 \u7ba1\u7406\u9875\u9762 \u6dfb\u52a0\u4e00\u6761CNAME\u89e3\u6790 \u4e3b\u673a\u8bb0\u5f55\uff1a@ \u8bb0\u5f55\u503c\uff1a \u7528\u6237\u540d .github.io \u5176\u4f59\u9ed8\u8ba4\u5373\u53ef \u672c\u5730\u535a\u5ba2\u6587\u4ef6\u5939 \uff0c\u5728blog/source\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa\u4e00\u4e2aCNAME\u6587\u4ef6\uff0c\u8f93\u5165\u81ea\u5b9a\u4e49\u57df\u540d\u3002 \u6ce8\u610f\uff1a\u4e0d\u662ftxt\u6587\u4ef6\u3002\u5982\u679c\u57df\u540d\u5e26\u6709www\uff0c\u90a3\u4e48\u8bbf\u95ee\u7684\u65f6\u5019\u5fc5\u987b\u5e26\u6709www\u5b8c\u6574\u7684\u57df\u540d\u624d\u53ef\u4ee5\u8bbf\u95ee\uff0c\u4f46\u5982\u679c\u4e0d\u5e26\u6709www\uff0c\u4ee5\u540e\u8bbf\u95ee\u7684\u65f6\u5019\u5e26\u4e0d\u5e26www\u90fd\u53ef\u4ee5\u8bbf\u95ee\u3002 \u66f4\u6362\u4e3b\u9898 \u66f4\u6362\u4e0d\u540c\u7684\u4e3b\u9898\uff0c\u4e3b\u9898\u4f20\u9001\u95e8\uff1a Themes \u3002 Next Butterfly \u53c2\u8003 \uff1a RunDouble's Blog","title":"Install"},{"location":"GithubPage/#github","text":"\u767b\u5f55\u5230 GitHub \uff0c\u521b\u5efa\u65b0\u4ed3\u5e93\uff0c\u4ed3\u5e93\u540d\u5e94\u8be5\u4e3a\uff1a \u7528\u6237\u540d .github.io \u7528\u6237\u540d \u4e3aGitHub\u5e10\u53f7\u540d\uff0c\u8fd9\u662f\u56fa\u5b9a\u5199\u6cd5\u3002","title":"\u914d\u7f6eGithub"},{"location":"GithubPage/#git","text":"\u4e0b\u8f7d\u5730\u5740\uff1a Git - Downloading Package \uff0c\u4e0b\u8f7d\u5b89\u88c5\u3002 \u5728\u547d\u4ee4\u884c\u91cc\u8f93\u5165 git --version \uff0c\u67e5\u770bgit\u7248\u672c\uff0c\u6d4b\u8bd5\u662f\u5426\u5b89\u88c5\u6210\u529f \u82e5\u5b89\u88c5\u5931\u8d25\uff0c\u89e3\u51b3git\u5b89\u88c5\u95ee\u9898\u3002 \u5ed6\u96ea\u5cf0 \u8001\u5e08\u7684 Git\u6559\u7a0b","title":"\u5b89\u88c5Git"},{"location":"GithubPage/#git_1","text":"","title":"\u914d\u7f6eGit"},{"location":"GithubPage/#_1","text":"git config --global user.name \"GitHub\u7528\u6237\u540d\" git config --global user.email \"GitHub\u6ce8\u518c\u90ae\u7bb1\"","title":"\u5168\u5c40\u914d\u7f6e"},{"location":"GithubPage/#ssh","text":"ssh-keygen -t rsa -C \"GitHub\u6ce8\u518c\u90ae\u7bb1\"","title":"\u751f\u6210ssh\u5bc6\u94a5\u6587\u4ef6"},{"location":"GithubPage/#ssh_1","text":"\u6253\u5f00 GitHub_Settings_keys \u9875\u9762\uff0c\u65b0\u5efanew SSH Key\uff1b\u6216\u6253\u5f00\u4ed3\u5e93\u7684Deploy keys\u9875\u9762\uff0c\u65b0\u5efanew deploy key\uff1b \u5176\u4e2dTitle\u4e3a\u6807\u9898\uff0cKey\u586b\u751f\u6210\u7684id_rsa.pub\u4e2d\u5185\u5bb9 \u5728Git Bash\u4e2d\u68c0\u6d4bGitHub\u516c\u94a5\u8bbe\u7f6e\u662f\u5426\u6210\u529f\uff0c\u8f93\u5165 ssh git@github.com \uff1a PTY allocation request failed on channel 0 Hi *******! You've successfully authenticated, but GitHub does not provide shell access. Connection to github.com closed. \u5982\u4e0a\u5219\u8bf4\u660e\u6210\u529f\u3002","title":"\u914d\u7f6essh\u5bc6\u94a5"},{"location":"GithubPage/#nodejs","text":"\u4e0b\u8f7d\u5730\u5740\uff1a Download | Node.js \uff0c\u4e0b\u8f7d\u5b89\u88c5\u3002\u6ce8\u610f\u5b89\u88c5Node.js\u4f1a\u5305\u542b \u73af\u5883\u53d8\u91cf \u53ca npm \u7684\u5b89\u88c5\u3002 \u5b89\u88c5\u540e\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165 node -v \uff0c\u68c0\u6d4bNode.js\u662f\u5426\u5b89\u88c5\u6210\u529f \uff1b\u8f93\u5165 npm -v \uff0c\u68c0\u6d4bnpm\u662f\u5426\u5b89\u88c5\u6210\u529f","title":"\u5b89\u88c5Node.js"},{"location":"GithubPage/#hexo","text":"\u4ee5 Hexo \u4f5c\u4e3a\u4e2a\u4eba\u535a\u5ba2\u7f51\u7ad9\u7684\u6846\u67b6\u3002 \u4f7f\u7528npm\u547d\u4ee4\u5b89\u88c5Hexo\uff1a npm install hexo-cli -g \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u5728\u4e0a\u4e00\u7ea7\u76ee\u5f55 D:\\> \u521d\u59cb\u5316\u535a\u5ba2\uff0c\u53ef\u4ee5\u547d\u540d\u4e3ablog\uff0cHexo\u6846\u67b6\u4e0e\u4ee5\u540e\u53d1\u5e03\u7684\u7f51\u9875\u90fd\u5728\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e2d\u3002 hexo init blog \u751f\u6210\u5e76\u9884\u89c8\u535a\u5ba2 hexo g hexo s \u5e38\u7528\u7684Hexo \u547d\u4ee4 npm install hexo -g #\u5b89\u88c5Hexo npm update hexo -g #\u5347\u7ea7 hexo init #\u521d\u59cb\u5316\u535a\u5ba2 \u547d\u4ee4\u7b80\u5199 hexo n \"\u6211\u7684\u535a\u5ba2\" == hexo new \"\u6211\u7684\u535a\u5ba2\" #\u65b0\u5efa\u6587\u7ae0 hexo g == hexo generate #\u751f\u6210 hexo s == hexo server #\u542f\u52a8\u670d\u52a1\u9884\u89c8 hexo d == hexo deploy #\u90e8\u7f72 hexo server #Hexo\u4f1a\u76d1\u89c6\u6587\u4ef6\u53d8\u52a8\u5e76\u81ea\u52a8\u66f4\u65b0\uff0c\u65e0\u987b\u91cd\u542f\u670d\u52a1\u5668 hexo server -s #\u9759\u6001\u6a21\u5f0f hexo server -p 5000 #\u66f4\u6539\u7aef\u53e3 hexo server -i 192.168.1.1 #\u81ea\u5b9a\u4e49 IP hexo clean #\u6e05\u9664\u7f13\u5b58\uff0c\u82e5\u662f\u7f51\u9875\u6b63\u5e38\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5ffd\u7565\u8fd9\u6761\u547d\u4ee4","title":"\u5b89\u88c5Hexo"},{"location":"GithubPage/#_2","text":"blog\u6839\u76ee\u5f55\u91cc\u7684_config.yml\u6587\u4ef6\uff0c\u79f0\u4e3a \u7ad9\u70b9\u914d\u7f6e\u6587\u4ef6 \u6839\u76ee\u5f55\u91cc\u7684themes\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u4e5f\u6709\u4e2a_config.yml\u6587\u4ef6\uff0c\u79f0\u4e3a \u4e3b\u9898\u914d\u7f6e\u6587\u4ef6 \u5c06\u6211\u4eec\u7684Hexo\u4e0eGitHub\u5173\u8054\u8d77\u6765\uff0c\u6253\u5f00 \u7ad9\u70b9\u914d\u7f6e\u6587\u4ef6 _config.yml\uff0c\u7ffb\u5230\u6700\u540e\u4fee\u6539 deploy: type: git repo: \u5728GitHub\u4e0a\u521b\u5efa\u4ed3\u5e93\u7684\u5b8c\u6574\u8def\u5f84 branch: master \u5b89\u88c5Git\u90e8\u7f72\u63d2\u4ef6\uff0c\u8f93\u5165\u547d\u4ee4\uff1a npm install hexo-deployer-git --save \u6b64\u65f6\u751f\u6210\u5e76\u90e8\u7f72\u535a\u5ba2 hexo clean hexo g -d \u535a\u5ba2\u5c31\u88ab\u90e8\u7f72\u5230\uff1a \u7528\u6237\u540d .github.io","title":"\u63a8\u9001\u7f51\u7ad9"},{"location":"GithubPage/#_3","text":"\u57fa\u4e8e\u963f\u91cc\u4e91\uff0c\u5728 \u7ba1\u7406\u63a7\u5236\u53f0 \u8fdb\u5165 \u57df\u540d\u89e3\u6790 \u7ba1\u7406\u9875\u9762 \u6dfb\u52a0\u4e00\u6761CNAME\u89e3\u6790 \u4e3b\u673a\u8bb0\u5f55\uff1a@ \u8bb0\u5f55\u503c\uff1a \u7528\u6237\u540d .github.io \u5176\u4f59\u9ed8\u8ba4\u5373\u53ef \u672c\u5730\u535a\u5ba2\u6587\u4ef6\u5939 \uff0c\u5728blog/source\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa\u4e00\u4e2aCNAME\u6587\u4ef6\uff0c\u8f93\u5165\u81ea\u5b9a\u4e49\u57df\u540d\u3002 \u6ce8\u610f\uff1a\u4e0d\u662ftxt\u6587\u4ef6\u3002\u5982\u679c\u57df\u540d\u5e26\u6709www\uff0c\u90a3\u4e48\u8bbf\u95ee\u7684\u65f6\u5019\u5fc5\u987b\u5e26\u6709www\u5b8c\u6574\u7684\u57df\u540d\u624d\u53ef\u4ee5\u8bbf\u95ee\uff0c\u4f46\u5982\u679c\u4e0d\u5e26\u6709www\uff0c\u4ee5\u540e\u8bbf\u95ee\u7684\u65f6\u5019\u5e26\u4e0d\u5e26www\u90fd\u53ef\u4ee5\u8bbf\u95ee\u3002","title":"\u7ed1\u5b9a\u57df\u540d"},{"location":"GithubPage/#_4","text":"\u66f4\u6362\u4e0d\u540c\u7684\u4e3b\u9898\uff0c\u4e3b\u9898\u4f20\u9001\u95e8\uff1a Themes \u3002 Next Butterfly \u53c2\u8003 \uff1a RunDouble's Blog","title":"\u66f4\u6362\u4e3b\u9898"},{"location":"Hexo-deploy/","text":"\u51c6\u5907 \u6838\u5fc3\u662f\u5728\u539f\u672cGithub Page\u63a8\u9001\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u6761\u63a8\u9001\u5411\u4e91\u670d\u52a1\u5668\u7684 deploy \uff0c\u9002\u7528\u4e8e\u589e\u52a0\u66f4\u591a\u90e8\u7f72\u3002 GitHub Page \u672c\u5730\u5df2\u7ecf\u914d\u5b89\u88c5\u7f6e\u597dgit\u3001hexo\uff0c\u89c1{% post_link GithubPage \u2018\u6b64\u5904\u2019 %} \u670d\u52a1\u5668 \u5df2\u642d\u5efa\u597dLNMP\u6846\u67b6\u4e0b\u7684\u7f51\u9875\u76ee\u5f55\uff0c\u89c1{% post_link LNMP\u642d\u5efa \u6b64\u5904 %} \u642d\u5efa \u672c\u5730git ssh-keygen -t rsa \u5bc6\u94a5\u9ed8\u8ba4\u4f4d\u7f6e\uff1aC\u76d8\u7528\u6237\u6587\u4ef6\u5939\u4e0b .ssh \u4e2d\uff0c\u5982\u5df2\u6709\u5219\u4e0d\u9700\u8981\u751f\u6210\u3002 \u670d\u52a1\u5668git \u5b89\u88c5git apt-get install git \u521b\u5efagit\u7528\u6237\u53cassh\u8bbe\u7f6e sudo adduser git su git cd ~ mkdir .ssh && chmod 700 .ssh touch .ssh/authorized_keys && chmod 600 .ssh/authorized_keys \u5728 authorized_keys \u4e2d\u5199\u5165\u672c\u5730\u751f\u6210\u7684\u516c\u94a5 git\u4ed3\u5e93 \u5c06 home \u4e2d\u7684git\u7528\u6237\u6587\u4ef6\u5939\u4f5c\u4e3a\u4ed3\u5e93\u76ee\u5f55 git init --bare hexoBlog.git \u5728 /home/git/hexoBlog.git \u4e0b\uff0c\u6709\u4e00\u4e2a\u81ea\u52a8\u751f\u6210\u7684 hooks \u6587\u4ef6\u5939\u3002\u6211\u4eec\u9700\u8981\u5728\u91cc\u8fb9\u65b0\u5efa\u4e00\u4e2a\u65b0\u7684\u94a9\u5b50\u6587\u4ef6 post-receive \u3002 \u8bb0\u5f97\u8d4b\u4e88\u6267\u884c\u6743\u9650\u3002 vim /home/git/hexoBlog.git/hooks/post-receive \u5728\u8be5\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e24\u884c\u4ee3\u7801 #!/bin/bash git --work-tree=/var/www --git-dir=/home/git/hexoBlog.git checkout -f #--work-tree\u662f\u7f51\u9875\u76ee\u5f55\uff0c--git-dir\u662fgit\u4ed3\u5e93\u76ee\u5f55 Nginx\u6258\u7ba1\u76ee\u5f55 \u5047\u8bbe\u5728 /var/www \uff0c\u9700\u8981\u66f4\u6539\u76ee\u5f55\u6743\u9650 chown -R $USER:$USER /var/www Hexo \u672c\u5730\u7684 Hexo \u535a\u5ba2\u6240\u5728\u6587\u4ef6\uff0c\u4fee\u6539\u7ad9\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u589e\u52a0\u4e00\u6761\u63a8\u9001\u5411\u4e91\u670d\u52a1\u5668\u7684 deploy \u3002 deploy: repo: #\u589e\u52a0\u4e00\u884c hexo: git@ip:/home/git/hexoBlog.git,master #\u8fd9\u91cc\u7684@\u524d\u7684git\u662f\u4e91\u670d\u52a1\u5668\u7684git\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u662froot\u4ec0\u4e48\u7684\uff0c\u4e0e\u4e91\u7aef\u5bf9\u5e94 \u53c2\u8003 \uff1a HEXO\u90e8\u7f72\u5230\u4e91\u670d\u52a1\u5668\u8be6\u7ec6\u6307\u5357 \uff0c Hexo\u6559\u7a0b\uff1aHexo \u535a\u5ba2\u90e8\u7f72\u5230\u817e\u8baf\u4e91\u6559\u7a0b","title":"Deploy"},{"location":"Hexo-deploy/#_1","text":"\u6838\u5fc3\u662f\u5728\u539f\u672cGithub Page\u63a8\u9001\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u6761\u63a8\u9001\u5411\u4e91\u670d\u52a1\u5668\u7684 deploy \uff0c\u9002\u7528\u4e8e\u589e\u52a0\u66f4\u591a\u90e8\u7f72\u3002","title":"\u51c6\u5907"},{"location":"Hexo-deploy/#github-page","text":"\u672c\u5730\u5df2\u7ecf\u914d\u5b89\u88c5\u7f6e\u597dgit\u3001hexo\uff0c\u89c1{% post_link GithubPage \u2018\u6b64\u5904\u2019 %}","title":"GitHub Page"},{"location":"Hexo-deploy/#_2","text":"\u5df2\u642d\u5efa\u597dLNMP\u6846\u67b6\u4e0b\u7684\u7f51\u9875\u76ee\u5f55\uff0c\u89c1{% post_link LNMP\u642d\u5efa \u6b64\u5904 %}","title":"\u670d\u52a1\u5668"},{"location":"Hexo-deploy/#_3","text":"","title":"\u642d\u5efa"},{"location":"Hexo-deploy/#git","text":"ssh-keygen -t rsa \u5bc6\u94a5\u9ed8\u8ba4\u4f4d\u7f6e\uff1aC\u76d8\u7528\u6237\u6587\u4ef6\u5939\u4e0b .ssh \u4e2d\uff0c\u5982\u5df2\u6709\u5219\u4e0d\u9700\u8981\u751f\u6210\u3002","title":"\u672c\u5730git"},{"location":"Hexo-deploy/#git_1","text":"","title":"\u670d\u52a1\u5668git"},{"location":"Hexo-deploy/#git_2","text":"apt-get install git","title":"\u5b89\u88c5git"},{"location":"Hexo-deploy/#gitssh","text":"sudo adduser git su git cd ~ mkdir .ssh && chmod 700 .ssh touch .ssh/authorized_keys && chmod 600 .ssh/authorized_keys \u5728 authorized_keys \u4e2d\u5199\u5165\u672c\u5730\u751f\u6210\u7684\u516c\u94a5","title":"\u521b\u5efagit\u7528\u6237\u53cassh\u8bbe\u7f6e"},{"location":"Hexo-deploy/#git_3","text":"\u5c06 home \u4e2d\u7684git\u7528\u6237\u6587\u4ef6\u5939\u4f5c\u4e3a\u4ed3\u5e93\u76ee\u5f55 git init --bare hexoBlog.git \u5728 /home/git/hexoBlog.git \u4e0b\uff0c\u6709\u4e00\u4e2a\u81ea\u52a8\u751f\u6210\u7684 hooks \u6587\u4ef6\u5939\u3002\u6211\u4eec\u9700\u8981\u5728\u91cc\u8fb9\u65b0\u5efa\u4e00\u4e2a\u65b0\u7684\u94a9\u5b50\u6587\u4ef6 post-receive \u3002 \u8bb0\u5f97\u8d4b\u4e88\u6267\u884c\u6743\u9650\u3002 vim /home/git/hexoBlog.git/hooks/post-receive \u5728\u8be5\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e24\u884c\u4ee3\u7801 #!/bin/bash git --work-tree=/var/www --git-dir=/home/git/hexoBlog.git checkout -f #--work-tree\u662f\u7f51\u9875\u76ee\u5f55\uff0c--git-dir\u662fgit\u4ed3\u5e93\u76ee\u5f55","title":"git\u4ed3\u5e93"},{"location":"Hexo-deploy/#nginx","text":"\u5047\u8bbe\u5728 /var/www \uff0c\u9700\u8981\u66f4\u6539\u76ee\u5f55\u6743\u9650 chown -R $USER:$USER /var/www","title":"Nginx\u6258\u7ba1\u76ee\u5f55"},{"location":"Hexo-deploy/#hexo","text":"\u672c\u5730\u7684 Hexo \u535a\u5ba2\u6240\u5728\u6587\u4ef6\uff0c\u4fee\u6539\u7ad9\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u589e\u52a0\u4e00\u6761\u63a8\u9001\u5411\u4e91\u670d\u52a1\u5668\u7684 deploy \u3002 deploy: repo: #\u589e\u52a0\u4e00\u884c hexo: git@ip:/home/git/hexoBlog.git,master #\u8fd9\u91cc\u7684@\u524d\u7684git\u662f\u4e91\u670d\u52a1\u5668\u7684git\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u662froot\u4ec0\u4e48\u7684\uff0c\u4e0e\u4e91\u7aef\u5bf9\u5e94 \u53c2\u8003 \uff1a HEXO\u90e8\u7f72\u5230\u4e91\u670d\u52a1\u5668\u8be6\u7ec6\u6307\u5357 \uff0c Hexo\u6559\u7a0b\uff1aHexo \u535a\u5ba2\u90e8\u7f72\u5230\u817e\u8baf\u4e91\u6559\u7a0b","title":"Hexo"},{"location":"LNMP%E6%90%AD%E5%BB%BA/","text":"\u4e00\u3001\u73af\u5883 Ubuntu lts 20.04 Nginx-1.20.2 zlib-1.2.12 pcre-8.45 openssl-1.1.1o PHP-7.4.29 MariaDB-10.3 \u4e8c\u3001\u5b89\u88c5\u8fc7\u7a0b \u6309\u7167MariaDB > Nginx > PHP\u7684\u987a\u5e8f\u5b89\u88c5\u3002 2.1 MariaDB 2.1.1 \u5b89\u88c5 sudo apt update sudo apt install mariadb-server \u5b89\u88c5\u5b8c\u6210\u540e \uff0cMariaDB \u670d\u52a1\u5c06\u4f1a\u81ea\u52a8\u542f\u52a8\u3002\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u9a8c\u8bc1\u6570\u636e\u5e93\u670d\u52a1\u5668\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3002 \u8f93\u51fa\u7ed3\u679c\u5c06\u4f1a\u663e\u793a\u670d\u52a1\u5df2\u7ecf\u542f\u7528\uff0c\u5e76\u4e14\u6b63\u5728\u8fd0\u884c\u3002 sudo systemctl status mariadb 2.1.2 \u7ef4\u62a4 sudo mysql_secure_installation \u6839\u636e\u811a\u672c\u63d0\u793a\u8f93\u5165 root \u5bc6\u7801\uff1a \u7531\u4e8e\u6ca1\u6709\u8bbe\u7f6e root \u5bc6\u7801\uff0c\u6240\u4ee5\u8fd9\u91cc\u4ec5\u4ec5\u8f93\u5165\u56de\u8f66\"Enter\"\u5373\u53ef\u3002 \u63a5\u4e0b\u6765\uff0c\u4f1a\u63d0\u793a\u662f\u5426\u4e3a MySQL root \u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\uff1a Enter current password for root (enter for none): Set root password? [Y/n] n Remove anonymous users? [Y/n] Y Disallow root login remotely? [Y/n] Y Remove test database and access to it? [Y/n] Y Reload privilege tables now? [Y/n] Y 2.2 Nginx \u6e90\u7801\u5b89\u88c5 \u4e09\u4e2a\u6e90\u7801\u5305\uff1a zlib-1.2.12 (\u538b\u7f29\u5e93) pcre-8.45 (\u6b63\u5219\u8868\u8fbe\u5f0f\u5e93) openssl-1.1.1o (\u52a0\u5bc6\u5e93\uff0c\u5982\u679c\u8981\u4f7f\u7528HTTPS\uff0c\u8fd9\u4e2a\u5e93\u662f\u5fc5\u987b\u7684) 2.2.1 \u521b\u5efa\u7528\u6237 groupadd -r nginx useradd -r -g nginx -s /bin/false -M nginx 2.2.2 \u7f16\u8bd1\u5b89\u88c5 \u5b89\u88c5\u7f16\u8bd1\u5668 apt install build-essential \u7f16\u8bd1\u5b89\u88c5 ./configure --prefix=/etc/nginx --group=nginx --user=nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-pcre-jit --with-openssl-opt=no-nextprotoneg --with-debug --with-pcre=../pcre-8.45 --with-zlib=../zlib-1.2.12 --with-openssl=../openssl-1.1.1o ## --with-pcre=../pcre-8.45 --with-zlib=../zlib-1.2.12 --with-openssl=../openssl-1.1.1o\u586b\u6e90\u7801\u5305\u8def\u5f84 ## \u6ce8\u610f\uff0c\u5982\u679c\u662f\u4f7f\u7528\u4e8c\u8fdb\u5236\u5305\u5b89\u88c5\u4e86zlib,pcre,openssl,\u53ca\u76f8\u5e94\u7684\u5f00\u53d1\u5e93\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u8def\u5f84\u3002 mkdir /var/cache/nginx \u7136\u540e\uff0c make \u548c make install 2.2.2 \u542f\u52a8\u9879 vim /etc/sytemd/system/nginx.service [Unit] Description=nginx - high performance web server Documentation=http://nginx.org/en/docs/ After=network-online.target remote-fs.target nss-lookup.target Wants=network-online.target [Service] Type=forking PIDFile=/run/nginx.pid ExecStartPre=/usr/sbin/nginx -t -c /etc/nginx/nginx.conf ExecStart=/usr/sbin/nginx -c /etc/nginx/nginx.conf ExecReload=/bin/kill -s HUP $MAINPID ExecStop=/bin/kill -s TERM $MAINPID [Install] WantedBy=multi-user.target \u8fd9\u4e2a\u53ef\u4ee5\u5728nginx \u5b98\u7f51\u627e\u5230\uff0c\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u9700\u6c42\u4fee\u6539\u3002\u6ce8\u610f\u8def\u5f84\u4fee\u6539\u6210\u81ea\u5df1\u7684\u5b89\u88c5\u8def\u5f84\u3002 systemctl daemon-reload systemctl start nginx.service \u542f\u52a8Nginx systemctl enable nginx.service \u5f00\u673a\u542f\u52a8 \u8bb0\u5f97\uff0c\u5982\u679c\u4e2d\u9014\u4fee\u6539\u4e86service\u6587\u4ef6\uff0c\u4e00\u5b9a\u8981\u5148\u8fd0\u884c systemctl daemon-reload\u91cd\u65b0\u52a0\u8f7d\u5b88\u62a4\u8fdb\u7a0b\u6587\u4ef6\u3002\u7136\u540e\u8fd0\u884c systemctl start nginx.service\u91cd\u542f\u670d\u52a1\u3002 2.3 PHP \u5b89\u88c5 PHP \u5b89\u88c5\u6bd4\u8f83\u7b80\u5355\uff0c\u4e3b\u8981\u662f\u9009\u62e9\u4f60\u8981\u5b89\u88c5\u7684\u62d3\u5c55\u6216\u8005\u9700\u8981\u5f00\u542f\u7684\u529f\u80fd \u53ef\u4ee5\u4f7f\u7528./configure --help \u6765\u6d4f\u89c8\u6e90\u7801\u5b89\u88c5\u63d0\u4f9b\u7684\u5b89\u88c5\u9009\u9879 \u6709\u4e9b\u5c5e\u4e8ePHP\u5185\u7f6e\u7684\u529f\u80fd\uff0c\u4f60\u53ea\u9700\u8981 enable\u6216\u8005disable\uff0c\u6bd4\u5982php-fpm\uff0c\u662f\u9700\u8981\u542f\u7528\u7684\u3002 \u6709\u4e9b\u62d3\u5c55\u662f\u53ef\u4ee5\u52a8\u6001\u52a0\u8f7d\u7684\uff0c\u79f0\u4e4b\u4e3ashared extension,\u4f46\u662f\u5b98\u65b9\u4e5f\u8bf4\u4e86\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u62d3\u5c55\u90fd\u662f\u80fd\u591fshared. 2.3.1 \u5b89\u88c5 apt-get install php7.4 php7.4-fpm 2.3.3 \u914d\u7f6eNginx\u652f\u6301 \u9700\u8981PHP\u7684\u7f51\u9875\u542f\u7528 \u5728 server{} \u5185\uff0c\u627e\u5230 index \u5f00\u5934\u7684\u914d\u7f6e\u884c\uff0c\u5728\u8be5\u884c\u4e2d\u6dfb\u52a0 index.php \u3002 \u5728 server{} \u5185\uff0c\u627e\u5230 location ~ \\.php$ {} \uff0c\u542f\u7528\u4ee5\u4e0b\u884c bash location ~ \\.php$ { include snippets/fastcgi-php.conf; fastcgi_pass unix:/var/run/php/php7.4-fpm.sock; }","title":"LNMP"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#_1","text":"","title":""},{"location":"LNMP%E6%90%AD%E5%BB%BA/#_2","text":"Ubuntu lts 20.04 Nginx-1.20.2 zlib-1.2.12 pcre-8.45 openssl-1.1.1o PHP-7.4.29 MariaDB-10.3","title":"\u4e00\u3001\u73af\u5883"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#_3","text":"\u6309\u7167MariaDB > Nginx > PHP\u7684\u987a\u5e8f\u5b89\u88c5\u3002","title":"\u4e8c\u3001\u5b89\u88c5\u8fc7\u7a0b"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#21-mariadb","text":"","title":"2.1 MariaDB"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#211","text":"sudo apt update sudo apt install mariadb-server \u5b89\u88c5\u5b8c\u6210\u540e \uff0cMariaDB \u670d\u52a1\u5c06\u4f1a\u81ea\u52a8\u542f\u52a8\u3002\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u9a8c\u8bc1\u6570\u636e\u5e93\u670d\u52a1\u5668\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3002 \u8f93\u51fa\u7ed3\u679c\u5c06\u4f1a\u663e\u793a\u670d\u52a1\u5df2\u7ecf\u542f\u7528\uff0c\u5e76\u4e14\u6b63\u5728\u8fd0\u884c\u3002 sudo systemctl status mariadb","title":"2.1.1 \u5b89\u88c5"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#212","text":"sudo mysql_secure_installation \u6839\u636e\u811a\u672c\u63d0\u793a\u8f93\u5165 root \u5bc6\u7801\uff1a \u7531\u4e8e\u6ca1\u6709\u8bbe\u7f6e root \u5bc6\u7801\uff0c\u6240\u4ee5\u8fd9\u91cc\u4ec5\u4ec5\u8f93\u5165\u56de\u8f66\"Enter\"\u5373\u53ef\u3002 \u63a5\u4e0b\u6765\uff0c\u4f1a\u63d0\u793a\u662f\u5426\u4e3a MySQL root \u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\uff1a Enter current password for root (enter for none): Set root password? [Y/n] n Remove anonymous users? [Y/n] Y Disallow root login remotely? [Y/n] Y Remove test database and access to it? [Y/n] Y Reload privilege tables now? [Y/n] Y","title":"2.1.2 \u7ef4\u62a4"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#22-nginx","text":"\u4e09\u4e2a\u6e90\u7801\u5305\uff1a zlib-1.2.12 (\u538b\u7f29\u5e93) pcre-8.45 (\u6b63\u5219\u8868\u8fbe\u5f0f\u5e93) openssl-1.1.1o (\u52a0\u5bc6\u5e93\uff0c\u5982\u679c\u8981\u4f7f\u7528HTTPS\uff0c\u8fd9\u4e2a\u5e93\u662f\u5fc5\u987b\u7684)","title":"2.2 Nginx \u6e90\u7801\u5b89\u88c5"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#221","text":"groupadd -r nginx useradd -r -g nginx -s /bin/false -M nginx","title":"2.2.1 \u521b\u5efa\u7528\u6237"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#222","text":"\u5b89\u88c5\u7f16\u8bd1\u5668 apt install build-essential \u7f16\u8bd1\u5b89\u88c5 ./configure --prefix=/etc/nginx --group=nginx --user=nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-pcre-jit --with-openssl-opt=no-nextprotoneg --with-debug --with-pcre=../pcre-8.45 --with-zlib=../zlib-1.2.12 --with-openssl=../openssl-1.1.1o ## --with-pcre=../pcre-8.45 --with-zlib=../zlib-1.2.12 --with-openssl=../openssl-1.1.1o\u586b\u6e90\u7801\u5305\u8def\u5f84 ## \u6ce8\u610f\uff0c\u5982\u679c\u662f\u4f7f\u7528\u4e8c\u8fdb\u5236\u5305\u5b89\u88c5\u4e86zlib,pcre,openssl,\u53ca\u76f8\u5e94\u7684\u5f00\u53d1\u5e93\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u8def\u5f84\u3002 mkdir /var/cache/nginx \u7136\u540e\uff0c make \u548c make install","title":"2.2.2 \u7f16\u8bd1\u5b89\u88c5"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#222_1","text":"vim /etc/sytemd/system/nginx.service [Unit] Description=nginx - high performance web server Documentation=http://nginx.org/en/docs/ After=network-online.target remote-fs.target nss-lookup.target Wants=network-online.target [Service] Type=forking PIDFile=/run/nginx.pid ExecStartPre=/usr/sbin/nginx -t -c /etc/nginx/nginx.conf ExecStart=/usr/sbin/nginx -c /etc/nginx/nginx.conf ExecReload=/bin/kill -s HUP $MAINPID ExecStop=/bin/kill -s TERM $MAINPID [Install] WantedBy=multi-user.target \u8fd9\u4e2a\u53ef\u4ee5\u5728nginx \u5b98\u7f51\u627e\u5230\uff0c\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u9700\u6c42\u4fee\u6539\u3002\u6ce8\u610f\u8def\u5f84\u4fee\u6539\u6210\u81ea\u5df1\u7684\u5b89\u88c5\u8def\u5f84\u3002 systemctl daemon-reload systemctl start nginx.service \u542f\u52a8Nginx systemctl enable nginx.service \u5f00\u673a\u542f\u52a8 \u8bb0\u5f97\uff0c\u5982\u679c\u4e2d\u9014\u4fee\u6539\u4e86service\u6587\u4ef6\uff0c\u4e00\u5b9a\u8981\u5148\u8fd0\u884c systemctl daemon-reload\u91cd\u65b0\u52a0\u8f7d\u5b88\u62a4\u8fdb\u7a0b\u6587\u4ef6\u3002\u7136\u540e\u8fd0\u884c systemctl start nginx.service\u91cd\u542f\u670d\u52a1\u3002","title":"2.2.2 \u542f\u52a8\u9879"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#23-php","text":"PHP \u5b89\u88c5\u6bd4\u8f83\u7b80\u5355\uff0c\u4e3b\u8981\u662f\u9009\u62e9\u4f60\u8981\u5b89\u88c5\u7684\u62d3\u5c55\u6216\u8005\u9700\u8981\u5f00\u542f\u7684\u529f\u80fd \u53ef\u4ee5\u4f7f\u7528./configure --help \u6765\u6d4f\u89c8\u6e90\u7801\u5b89\u88c5\u63d0\u4f9b\u7684\u5b89\u88c5\u9009\u9879 \u6709\u4e9b\u5c5e\u4e8ePHP\u5185\u7f6e\u7684\u529f\u80fd\uff0c\u4f60\u53ea\u9700\u8981 enable\u6216\u8005disable\uff0c\u6bd4\u5982php-fpm\uff0c\u662f\u9700\u8981\u542f\u7528\u7684\u3002 \u6709\u4e9b\u62d3\u5c55\u662f\u53ef\u4ee5\u52a8\u6001\u52a0\u8f7d\u7684\uff0c\u79f0\u4e4b\u4e3ashared extension,\u4f46\u662f\u5b98\u65b9\u4e5f\u8bf4\u4e86\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u62d3\u5c55\u90fd\u662f\u80fd\u591fshared.","title":"2.3 PHP \u5b89\u88c5"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#231","text":"apt-get install php7.4 php7.4-fpm","title":"2.3.1 \u5b89\u88c5"},{"location":"LNMP%E6%90%AD%E5%BB%BA/#233-nginx","text":"\u9700\u8981PHP\u7684\u7f51\u9875\u542f\u7528 \u5728 server{} \u5185\uff0c\u627e\u5230 index \u5f00\u5934\u7684\u914d\u7f6e\u884c\uff0c\u5728\u8be5\u884c\u4e2d\u6dfb\u52a0 index.php \u3002 \u5728 server{} \u5185\uff0c\u627e\u5230 location ~ \\.php$ {} \uff0c\u542f\u7528\u4ee5\u4e0b\u884c bash location ~ \\.php$ { include snippets/fastcgi-php.conf; fastcgi_pass unix:/var/run/php/php7.4-fpm.sock; }","title":"2.3.3 \u914d\u7f6eNginx\u652f\u6301"},{"location":"NVM-Windows/","text":"nvm\u662f\u4ec0\u4e48 nvm \u5168\u82f1\u6587\u4e5f\u53eb node.js version management \uff0c\u662f\u4e00\u4e2a nodejs \u7684\u7248\u672c\u7ba1\u7406\u5de5\u5177\u3002 nvm \u548c n \u90fd\u662f node.js \u7248\u672c\u7ba1\u7406\u5de5\u5177\uff0c\u4e3a\u4e86\u89e3\u51b3 node.js \u5404\u79cd\u7248\u672c\u5b58\u5728\u4e0d\u517c\u5bb9\u73b0\u8c61\u53ef\u4ee5\u901a\u8fc7\u5b83\u53ef\u4ee5\u5b89\u88c5\u548c\u5207\u6362\u4e0d\u540c\u7248\u672c\u7684 node.js \u3002 nvm\u4e0b\u8f7d \u5728 github \u4e0a\u4e0b\u8f7d\u6700\u65b0\u7248\u672c,\u672c\u6b21\u4e0b\u8f7d\u5b89\u88c5\u7684\u662fwindows\u7248\u672c\u3002 nvm\u5b89\u88c5 \u5378\u8f7d\u4e4b\u524d\u7684node\u540e\u5b89\u88c5nvm , nvm-setup.exe\u5b89\u88c5\u7248\uff0c\u76f4\u63a5\u8fd0\u884cnvm-setup.exe \u9009\u62e9nvm\u5b89\u88c5\u8def\u5f84(\u65e0\u7a7a\u683c\u4e0e\u4e2d\u6587) \u9009\u62e9nodejs\u8def\u5f84 \u786e\u8ba4\u5b89\u88c5\u5373\u53ef \u5b89\u88c5\u5b8c\u786e\u8ba4 \u6253\u5f00CMD\uff0c\u8f93\u5165\u547d\u4ee4 nvm \uff0c\u5b89\u88c5\u6210\u529f\u5219\u53ef\u4ee5\u770b\u5230\u5217\u51fa\u4e86\u5404\u79cd\u547d\u4ee4\uff0c nvm-windows \u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 \u3002 nvm\u547d\u4ee4\u63d0\u793a nvm arch\uff1a\u663e\u793anode\u662f\u8fd0\u884c\u572832\u4f4d\u8fd8\u662f64\u4f4d\u3002 nvm install [arch] \uff1a\u5b89\u88c5node\uff0c version\u662f\u7279\u5b9a\u7248\u672c\u4e5f\u53ef\u4ee5\u662f\u6700\u65b0\u7a33\u5b9a\u7248\u672clatest\u3002\u53ef\u9009\u53c2\u6570arch\u6307\u5b9a\u5b89\u88c532\u4f4d\u8fd8\u662f64\u4f4d\u7248\u672c\uff0c\u9ed8\u8ba4\u662f\u7cfb\u7edf\u4f4d\u6570\u3002\u53ef\u4ee5\u6dfb\u52a0--insecure\u7ed5\u8fc7\u8fdc\u7a0b\u670d\u52a1\u5668\u7684SSL\u3002 nvm list [available] \uff1a\u663e\u793a\u5df2\u5b89\u88c5\u7684\u5217\u8868\u3002\u53ef\u9009\u53c2\u6570available\uff0c\u663e\u793a\u53ef\u5b89\u88c5\u7684\u6240\u6709\u7248\u672c\u3002list\u53ef\u7b80\u5316\u4e3als\u3002 nvm on \uff1a\u5f00\u542fnode.js\u7248\u672c\u7ba1\u7406\u3002 nvm off \uff1a\u5173\u95ednode.js\u7248\u672c\u7ba1\u7406\u3002 nvm proxy [url] \uff1a\u8bbe\u7f6e\u4e0b\u8f7d\u4ee3\u7406\u3002\u4e0d\u52a0\u53ef\u9009\u53c2\u6570url\uff0c\u663e\u793a\u5f53\u524d\u4ee3\u7406\u3002\u5c06url\u8bbe\u7f6e\u4e3anone\u5219\u79fb\u9664\u4ee3\u7406\u3002 nvm node_mirror [url] \uff1a\u8bbe\u7f6enode\u955c\u50cf\u3002\u9ed8\u8ba4\u662fhttps://nodejs.org/dist/\u3002\u5982\u679c\u4e0d\u5199url\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4url\u3002\u8bbe\u7f6e\u540e\u53ef\u81f3\u5b89\u88c5\u76ee\u5f55settings.txt\u6587\u4ef6\u67e5\u770b\uff0c\u4e5f\u53ef\u76f4\u63a5\u5728\u8be5\u6587\u4ef6\u64cd\u4f5c\u3002 nvm npm_mirror [url] \uff1a\u8bbe\u7f6enpm\u955c\u50cf\u3002https://github.com/npm/cli/archive/\u3002\u5982\u679c\u4e0d\u5199url\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4url\u3002\u8bbe\u7f6e\u540e\u53ef\u81f3\u5b89\u88c5\u76ee\u5f55settings.txt\u6587\u4ef6\u67e5\u770b\uff0c\u4e5f\u53ef\u76f4\u63a5\u5728\u8be5\u6587\u4ef6\u64cd\u4f5c\u3002 nvm uninstall \uff1a\u5378\u8f7d\u6307\u5b9a\u7248\u672cnode\u3002 nvm use [version] [arch] \uff1a\u4f7f\u7528\u5236\u5b9a\u7248\u672cnode\u3002\u53ef\u6307\u5b9a32/64\u4f4d\u3002 nvm root [path] \uff1a\u8bbe\u7f6e\u5b58\u50a8\u4e0d\u540c\u7248\u672cnode\u7684\u76ee\u5f55\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u3002 nvm version \uff1a\u663e\u793anvm\u7248\u672c\u3002version\u53ef\u7b80\u5316\u4e3av\u3002 nvm\u5e38\u89c1\u95ee\u9898 \u5982\u679c\u4e0b\u8f7dnode\u8fc7\u6162\uff0c\u8bf7\u66f4\u6362\u56fd\u5185\u955c\u50cf\u6e90, \u5728 nvm \u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff0c\u627e\u5230 settings.txt\uff0c\u8bbe\u7f6enode_mirro\u4e0enpm_mirror\u4e3a\u56fd\u5185\u955c\u50cf\u5730\u5740\u3002\u4e0b\u8f7d\u5c31\u98de\u5feb\u4e86~~ nvm node_mirror https://npmmirror.com/mirrors/node/ nvm npm_mirror https://npm.taobao.org/mirrors/npm/ \u6765\u6e90\uff1a http://nvm.uihtm.com/","title":"nvm\u662f\u4ec0\u4e48"},{"location":"NVM-Windows/#nvm","text":"nvm \u5168\u82f1\u6587\u4e5f\u53eb node.js version management \uff0c\u662f\u4e00\u4e2a nodejs \u7684\u7248\u672c\u7ba1\u7406\u5de5\u5177\u3002 nvm \u548c n \u90fd\u662f node.js \u7248\u672c\u7ba1\u7406\u5de5\u5177\uff0c\u4e3a\u4e86\u89e3\u51b3 node.js \u5404\u79cd\u7248\u672c\u5b58\u5728\u4e0d\u517c\u5bb9\u73b0\u8c61\u53ef\u4ee5\u901a\u8fc7\u5b83\u53ef\u4ee5\u5b89\u88c5\u548c\u5207\u6362\u4e0d\u540c\u7248\u672c\u7684 node.js \u3002","title":"nvm\u662f\u4ec0\u4e48"},{"location":"NVM-Windows/#nvm_1","text":"\u5728 github \u4e0a\u4e0b\u8f7d\u6700\u65b0\u7248\u672c,\u672c\u6b21\u4e0b\u8f7d\u5b89\u88c5\u7684\u662fwindows\u7248\u672c\u3002","title":"nvm\u4e0b\u8f7d"},{"location":"NVM-Windows/#nvm_2","text":"\u5378\u8f7d\u4e4b\u524d\u7684node\u540e\u5b89\u88c5nvm , nvm-setup.exe\u5b89\u88c5\u7248\uff0c\u76f4\u63a5\u8fd0\u884cnvm-setup.exe \u9009\u62e9nvm\u5b89\u88c5\u8def\u5f84(\u65e0\u7a7a\u683c\u4e0e\u4e2d\u6587) \u9009\u62e9nodejs\u8def\u5f84 \u786e\u8ba4\u5b89\u88c5\u5373\u53ef \u5b89\u88c5\u5b8c\u786e\u8ba4 \u6253\u5f00CMD\uff0c\u8f93\u5165\u547d\u4ee4 nvm \uff0c\u5b89\u88c5\u6210\u529f\u5219\u53ef\u4ee5\u770b\u5230\u5217\u51fa\u4e86\u5404\u79cd\u547d\u4ee4\uff0c nvm-windows \u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 \u3002","title":"nvm\u5b89\u88c5"},{"location":"NVM-Windows/#nvm_3","text":"nvm arch\uff1a\u663e\u793anode\u662f\u8fd0\u884c\u572832\u4f4d\u8fd8\u662f64\u4f4d\u3002 nvm install [arch] \uff1a\u5b89\u88c5node\uff0c version\u662f\u7279\u5b9a\u7248\u672c\u4e5f\u53ef\u4ee5\u662f\u6700\u65b0\u7a33\u5b9a\u7248\u672clatest\u3002\u53ef\u9009\u53c2\u6570arch\u6307\u5b9a\u5b89\u88c532\u4f4d\u8fd8\u662f64\u4f4d\u7248\u672c\uff0c\u9ed8\u8ba4\u662f\u7cfb\u7edf\u4f4d\u6570\u3002\u53ef\u4ee5\u6dfb\u52a0--insecure\u7ed5\u8fc7\u8fdc\u7a0b\u670d\u52a1\u5668\u7684SSL\u3002 nvm list [available] \uff1a\u663e\u793a\u5df2\u5b89\u88c5\u7684\u5217\u8868\u3002\u53ef\u9009\u53c2\u6570available\uff0c\u663e\u793a\u53ef\u5b89\u88c5\u7684\u6240\u6709\u7248\u672c\u3002list\u53ef\u7b80\u5316\u4e3als\u3002 nvm on \uff1a\u5f00\u542fnode.js\u7248\u672c\u7ba1\u7406\u3002 nvm off \uff1a\u5173\u95ednode.js\u7248\u672c\u7ba1\u7406\u3002 nvm proxy [url] \uff1a\u8bbe\u7f6e\u4e0b\u8f7d\u4ee3\u7406\u3002\u4e0d\u52a0\u53ef\u9009\u53c2\u6570url\uff0c\u663e\u793a\u5f53\u524d\u4ee3\u7406\u3002\u5c06url\u8bbe\u7f6e\u4e3anone\u5219\u79fb\u9664\u4ee3\u7406\u3002 nvm node_mirror [url] \uff1a\u8bbe\u7f6enode\u955c\u50cf\u3002\u9ed8\u8ba4\u662fhttps://nodejs.org/dist/\u3002\u5982\u679c\u4e0d\u5199url\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4url\u3002\u8bbe\u7f6e\u540e\u53ef\u81f3\u5b89\u88c5\u76ee\u5f55settings.txt\u6587\u4ef6\u67e5\u770b\uff0c\u4e5f\u53ef\u76f4\u63a5\u5728\u8be5\u6587\u4ef6\u64cd\u4f5c\u3002 nvm npm_mirror [url] \uff1a\u8bbe\u7f6enpm\u955c\u50cf\u3002https://github.com/npm/cli/archive/\u3002\u5982\u679c\u4e0d\u5199url\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4url\u3002\u8bbe\u7f6e\u540e\u53ef\u81f3\u5b89\u88c5\u76ee\u5f55settings.txt\u6587\u4ef6\u67e5\u770b\uff0c\u4e5f\u53ef\u76f4\u63a5\u5728\u8be5\u6587\u4ef6\u64cd\u4f5c\u3002 nvm uninstall \uff1a\u5378\u8f7d\u6307\u5b9a\u7248\u672cnode\u3002 nvm use [version] [arch] \uff1a\u4f7f\u7528\u5236\u5b9a\u7248\u672cnode\u3002\u53ef\u6307\u5b9a32/64\u4f4d\u3002 nvm root [path] \uff1a\u8bbe\u7f6e\u5b58\u50a8\u4e0d\u540c\u7248\u672cnode\u7684\u76ee\u5f55\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u3002 nvm version \uff1a\u663e\u793anvm\u7248\u672c\u3002version\u53ef\u7b80\u5316\u4e3av\u3002","title":"nvm\u547d\u4ee4\u63d0\u793a"},{"location":"NVM-Windows/#nvm_4","text":"\u5982\u679c\u4e0b\u8f7dnode\u8fc7\u6162\uff0c\u8bf7\u66f4\u6362\u56fd\u5185\u955c\u50cf\u6e90, \u5728 nvm \u7684\u5b89\u88c5\u8def\u5f84\u4e0b\uff0c\u627e\u5230 settings.txt\uff0c\u8bbe\u7f6enode_mirro\u4e0enpm_mirror\u4e3a\u56fd\u5185\u955c\u50cf\u5730\u5740\u3002\u4e0b\u8f7d\u5c31\u98de\u5feb\u4e86~~ nvm node_mirror https://npmmirror.com/mirrors/node/ nvm npm_mirror https://npm.taobao.org/mirrors/npm/ \u6765\u6e90\uff1a http://nvm.uihtm.com/","title":"nvm\u5e38\u89c1\u95ee\u9898"},{"location":"Python-pip/","text":"\u5378\u8f7d\u65e7\u7248\u672c \u5982\u679c\u6709\u65e7\u7684python3.x\u7248\u672c\uff0c\u53ef\u4ee5\u5148\u5378\u8f7d\uff0c\u4f46\u5efa\u8bae\u4e0d\u8981\u5378\u8f7d\uff0c\u56e0\u4e3a\u6709\u5f88\u591a\u4f9d\u8d56\uff0c\u66ff\u6362\u7248\u672c\u53f7\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4: apt-get autoremove python3.5 python3.5-dev \u5b89\u88c5\u6b65\u9aa4 \u8865\u5168\u76f8\u5173\u7ec4\u4ef6\uff1a sudo apt-get install dirmngr sudo gcc \u7f16\u8f91apt\u7684\u6e90\u6587\u4ef6 vim /etc/apt/sources.list \u6dfb\u52a0\u4ee5\u4e0b\u6e90 deb http://mirrors.163.com/ubuntu/ bionic main \u4e3a\u6e90\u6dfb\u52a0KEY sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 3B4FE6ACC0B21F32 \u8ba9\u670d\u52a1\u5668\u4f7f\u7528 \u201c\u7a33\u5b9a\u7248\u201d \u7684\u5e93\u6210\u4e3a\u9ed8\u8ba4\u8f6f\u4ef6\u5e93\uff1a echo 'APT::Default-Release \"stable\";' | sudo tee -a /etc/apt/apt.conf.d/00local \u66f4\u65b0\u6e90 sudo apt-get update \u5b89\u88c5python3.6 sudo apt-get -t bionic install python3.6 python3.6-dev python3-distutils python3-pip ln -s /usr/bin/python3.6 /usr/bin/python3 \u5b89\u88c5pip3.6 wget https://bootstrap.pypa.io/get-pip.py python3 get-pip.py python2.x\u5b89\u88c5pip python2.7 get-pip.py \u68c0\u67e5setuptools\u662f\u5426\u5b89\u88c5\u6210\u529f\uff1a easy_install --version sudo apt-get clean \u8bbe\u7f6e\u4f7f\u7528\u56fd\u5185PIP\u6e90\uff1a vim ~/.pip/pip.conf [global] index-url = http://mirrors.aliyun.com/pypi/simple/ trusted-host = mirrors.aliyun.com","title":"pip"},{"location":"Python-pip/#_1","text":"\u5982\u679c\u6709\u65e7\u7684python3.x\u7248\u672c\uff0c\u53ef\u4ee5\u5148\u5378\u8f7d\uff0c\u4f46\u5efa\u8bae\u4e0d\u8981\u5378\u8f7d\uff0c\u56e0\u4e3a\u6709\u5f88\u591a\u4f9d\u8d56\uff0c\u66ff\u6362\u7248\u672c\u53f7\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4: apt-get autoremove python3.5 python3.5-dev","title":"\u5378\u8f7d\u65e7\u7248\u672c"},{"location":"Python-pip/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"Python-pip/#_3","text":"sudo apt-get install dirmngr sudo gcc","title":"\u8865\u5168\u76f8\u5173\u7ec4\u4ef6\uff1a"},{"location":"Python-pip/#apt","text":"vim /etc/apt/sources.list \u6dfb\u52a0\u4ee5\u4e0b\u6e90 deb http://mirrors.163.com/ubuntu/ bionic main \u4e3a\u6e90\u6dfb\u52a0KEY sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 3B4FE6ACC0B21F32 \u8ba9\u670d\u52a1\u5668\u4f7f\u7528 \u201c\u7a33\u5b9a\u7248\u201d \u7684\u5e93\u6210\u4e3a\u9ed8\u8ba4\u8f6f\u4ef6\u5e93\uff1a echo 'APT::Default-Release \"stable\";' | sudo tee -a /etc/apt/apt.conf.d/00local \u66f4\u65b0\u6e90 sudo apt-get update","title":"\u7f16\u8f91apt\u7684\u6e90\u6587\u4ef6"},{"location":"Python-pip/#python36","text":"sudo apt-get -t bionic install python3.6 python3.6-dev python3-distutils python3-pip ln -s /usr/bin/python3.6 /usr/bin/python3","title":"\u5b89\u88c5python3.6"},{"location":"Python-pip/#pip36","text":"wget https://bootstrap.pypa.io/get-pip.py python3 get-pip.py python2.x\u5b89\u88c5pip python2.7 get-pip.py \u68c0\u67e5setuptools\u662f\u5426\u5b89\u88c5\u6210\u529f\uff1a easy_install --version sudo apt-get clean \u8bbe\u7f6e\u4f7f\u7528\u56fd\u5185PIP\u6e90\uff1a vim ~/.pip/pip.conf [global] index-url = http://mirrors.aliyun.com/pypi/simple/ trusted-host = mirrors.aliyun.com","title":"\u5b89\u88c5pip3.6"},{"location":"Supervisor/","text":"\u5b89\u88c5supervisor pip\u65b9\u5f0f wget https://bootstrap.pypa.io/get-pip.py python get-pip.py rm -rf get-pip.py pip install supervisor apt\u65b9\u5f0f apt-get install supervisor \u914d\u7f6esupervisor echo_supervisord_conf > /etc/supervisor/supervisord.conf(\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e) echo \"supervisord\" >> /etc/rc.local cat >>/etc/supervisord.conf<<'EOF' [program:relaysrv] command=relaysrv -keys /etc/relaysrv -pools=\"\" autostart=true autorestart=true startsecs=10 stdout_logfile=/var/log/relaysrv.log stdout_logfile_maxbytes=1MB stdout_logfile_backups=10 stdout_capture_maxbytes=1MB redirect_stderr=true user = root #program\u540e\u9762\u8ddf\u670d\u52a1\u7684\u540d\u79f0 #command\u662f\u7a0b\u5e8f\u7684\u6267\u884c\u8def\u5f84 #autorstart\u662f\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u968fsupervisor\u7684\u542f\u52a8\u800c\u542f\u52a8 #stdout_logfile\u662f\u6355\u83b7\u6807\u51c6\u8f93\u51fa\u3002 EOF \u914d\u7f6eSupervisor\u5f00\u673a\u542f\u52a8 \u914d\u7f6esystemctl \u8fdb\u5165 /lib/systemd/system \u76ee\u5f55\uff0c\u5e76\u521b\u5efa supervisor.service \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u6240\u793a\u3002 root@VC:/lib/systemd/system#whereis supervisord supervisord: *\u67e5\u5230\u7684\u5730\u5740*/supervisord root@VC:/lib/systemd/system# whereis supervisorctl supervisorctl: *\u67e5\u5230\u7684\u5730\u5740*/supervisorctl # \u521b\u5efa\u6587\u4ef6 root@VC:/lib/systemd/system# vim supervisor.service [Unit] Description=supervisor After=network.target [Service] Type=forking ExecStart=*\u67e5\u5230\u7684\u5730\u5740*/supervisord -c *\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e*/supervisord.conf ExecStop=*\u67e5\u5230\u7684\u5730\u5740*/supervisorctl $OPTIONS shutdown ExecReload=*\u67e5\u5230\u7684\u5730\u5740*/supervisorctl $OPTIONS reload KillMode=process Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.target \u8bbe\u7f6e\u5f00\u673a\u542f\u52a8 root@VC:/lib/systemd/system# systemctl enable supervisor.service Created symlink from /etc/systemd/system/multi-user.target.wants/supervisor.service to /lib/systemd/system/supervisor.service. root@VC:/lib/systemd/system# systemctl daemon-reload \u4fee\u6539\u6587\u4ef6\u6743\u9650\u4e3a766 root@VC:/lib/systemd/system# chmod 766 supervisor.service supervisorctl\u547d\u4ee4\u884c\u4e0b\u7684\u547d\u4ee4\uff1a supervisorctl status #\u67e5\u770bsupervisord\u76d1\u63a7\u7684\u6240\u6709\u8fdb\u7a0b\u7684\u72b6\u6001 supervisorctl celery status #\u67e5\u770bcelery\u8fdb\u7a0b\u7684\u72b6\u6001 supervisorctl stop xxx #\u505c\u6b62\u67d0\u4e00\u4e2a\u8fdb\u7a0b(xxx)\uff0cxxx\u4e3a[program:theprogramname]\u91cc\u914d\u7f6e\u7684\u503c supervisorctl start xxx #\u542f\u52a8\u67d0\u4e2a\u8fdb\u7a0b supervisorctl restart xxx #\u91cd\u542f\u67d0\u4e2a\u8fdb\u7a0b supervisorctl stop groupworker #\u91cd\u542f\u6240\u6709\u5c5e\u4e8e\u540d\u4e3agroupworker\u8fd9\u4e2a\u5206\u7ec4\u7684\u8fdb\u7a0b supervisorctl stop all #\u505c\u6b62\u5168\u90e8\u8fdb\u7a0b\uff0c\u6ce8\uff1astart\u3001(start,restart\u540c\u7406)restart\u3001stop\u90fd\u4e0d\u4f1a\u8f7d\u5165\u6700\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 supervisorctl reload #\u91cd\u542fsupervisor supervisorctl update #\u6839\u636e\u6700\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u542f\u52a8\u65b0\u914d\u7f6e\u6216\u6709\u6539\u52a8\u7684\u8fdb\u7a0b\uff0c\u914d\u7f6e\u6ca1\u6709\u6539\u52a8\u7684\u8fdb\u7a0b\u4e0d\u4f1a\u53d7\u5f71\u54cd\u800c\u91cd\u542f\u3002\u5f53\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u540e\uff0c\u8981\u6267\u884c\u8fd9\u6761\u547d\u4ee4\u3002 #\u7528stop\u505c\u6b62\u6389\u7684\u8fdb\u7a0b\uff0c\u5373\u4f7f\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u4e86autorestart=true\uff0c\u7528reload\u6216\u8005update\u90fd\u4e0d\u4f1a\u81ea\u52a8\u91cd\u542f\u3002 supervisorctl shutdown # \u5173\u95edsupervisord,\u4f1a\u540c\u65f6\u5173\u95edsupervisord\u76d1\u63a7\u7684\u6240\u6709\u8fdb\u7a0b","title":"Supervisor"},{"location":"Supervisor/#supervisor","text":"","title":"\u5b89\u88c5supervisor"},{"location":"Supervisor/#pip","text":"wget https://bootstrap.pypa.io/get-pip.py python get-pip.py rm -rf get-pip.py pip install supervisor","title":"pip\u65b9\u5f0f"},{"location":"Supervisor/#apt","text":"apt-get install supervisor","title":"apt\u65b9\u5f0f"},{"location":"Supervisor/#supervisor_1","text":"echo_supervisord_conf > /etc/supervisor/supervisord.conf(\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e) echo \"supervisord\" >> /etc/rc.local cat >>/etc/supervisord.conf<<'EOF' [program:relaysrv] command=relaysrv -keys /etc/relaysrv -pools=\"\" autostart=true autorestart=true startsecs=10 stdout_logfile=/var/log/relaysrv.log stdout_logfile_maxbytes=1MB stdout_logfile_backups=10 stdout_capture_maxbytes=1MB redirect_stderr=true user = root #program\u540e\u9762\u8ddf\u670d\u52a1\u7684\u540d\u79f0 #command\u662f\u7a0b\u5e8f\u7684\u6267\u884c\u8def\u5f84 #autorstart\u662f\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u968fsupervisor\u7684\u542f\u52a8\u800c\u542f\u52a8 #stdout_logfile\u662f\u6355\u83b7\u6807\u51c6\u8f93\u51fa\u3002 EOF","title":"\u914d\u7f6esupervisor"},{"location":"Supervisor/#supervisor_2","text":"","title":"\u914d\u7f6eSupervisor\u5f00\u673a\u542f\u52a8"},{"location":"Supervisor/#systemctl","text":"\u8fdb\u5165 /lib/systemd/system \u76ee\u5f55\uff0c\u5e76\u521b\u5efa supervisor.service \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u6240\u793a\u3002 root@VC:/lib/systemd/system#whereis supervisord supervisord: *\u67e5\u5230\u7684\u5730\u5740*/supervisord root@VC:/lib/systemd/system# whereis supervisorctl supervisorctl: *\u67e5\u5230\u7684\u5730\u5740*/supervisorctl # \u521b\u5efa\u6587\u4ef6 root@VC:/lib/systemd/system# vim supervisor.service [Unit] Description=supervisor After=network.target [Service] Type=forking ExecStart=*\u67e5\u5230\u7684\u5730\u5740*/supervisord -c *\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e*/supervisord.conf ExecStop=*\u67e5\u5230\u7684\u5730\u5740*/supervisorctl $OPTIONS shutdown ExecReload=*\u67e5\u5230\u7684\u5730\u5740*/supervisorctl $OPTIONS reload KillMode=process Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.target","title":"\u914d\u7f6esystemctl"},{"location":"Supervisor/#_1","text":"root@VC:/lib/systemd/system# systemctl enable supervisor.service Created symlink from /etc/systemd/system/multi-user.target.wants/supervisor.service to /lib/systemd/system/supervisor.service. root@VC:/lib/systemd/system# systemctl daemon-reload","title":"\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8"},{"location":"Supervisor/#766","text":"root@VC:/lib/systemd/system# chmod 766 supervisor.service","title":"\u4fee\u6539\u6587\u4ef6\u6743\u9650\u4e3a766"},{"location":"Supervisor/#supervisorctl","text":"supervisorctl status #\u67e5\u770bsupervisord\u76d1\u63a7\u7684\u6240\u6709\u8fdb\u7a0b\u7684\u72b6\u6001 supervisorctl celery status #\u67e5\u770bcelery\u8fdb\u7a0b\u7684\u72b6\u6001 supervisorctl stop xxx #\u505c\u6b62\u67d0\u4e00\u4e2a\u8fdb\u7a0b(xxx)\uff0cxxx\u4e3a[program:theprogramname]\u91cc\u914d\u7f6e\u7684\u503c supervisorctl start xxx #\u542f\u52a8\u67d0\u4e2a\u8fdb\u7a0b supervisorctl restart xxx #\u91cd\u542f\u67d0\u4e2a\u8fdb\u7a0b supervisorctl stop groupworker #\u91cd\u542f\u6240\u6709\u5c5e\u4e8e\u540d\u4e3agroupworker\u8fd9\u4e2a\u5206\u7ec4\u7684\u8fdb\u7a0b supervisorctl stop all #\u505c\u6b62\u5168\u90e8\u8fdb\u7a0b\uff0c\u6ce8\uff1astart\u3001(start,restart\u540c\u7406)restart\u3001stop\u90fd\u4e0d\u4f1a\u8f7d\u5165\u6700\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 supervisorctl reload #\u91cd\u542fsupervisor supervisorctl update #\u6839\u636e\u6700\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u542f\u52a8\u65b0\u914d\u7f6e\u6216\u6709\u6539\u52a8\u7684\u8fdb\u7a0b\uff0c\u914d\u7f6e\u6ca1\u6709\u6539\u52a8\u7684\u8fdb\u7a0b\u4e0d\u4f1a\u53d7\u5f71\u54cd\u800c\u91cd\u542f\u3002\u5f53\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u540e\uff0c\u8981\u6267\u884c\u8fd9\u6761\u547d\u4ee4\u3002 #\u7528stop\u505c\u6b62\u6389\u7684\u8fdb\u7a0b\uff0c\u5373\u4f7f\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u4e86autorestart=true\uff0c\u7528reload\u6216\u8005update\u90fd\u4e0d\u4f1a\u81ea\u52a8\u91cd\u542f\u3002 supervisorctl shutdown # \u5173\u95edsupervisord,\u4f1a\u540c\u65f6\u5173\u95edsupervisord\u76d1\u63a7\u7684\u6240\u6709\u8fdb\u7a0b","title":"supervisorctl\u547d\u4ee4\u884c\u4e0b\u7684\u547d\u4ee4\uff1a"},{"location":"Syncthing/","text":"Syncthing Discovery Server \u4e0b\u8f7d stdiscosrv \u5305 wget https://github.com/syncthing/discosrv/releases/download/*version*/stdiscosrv-linux-amd64-*version*.tar.gz \u89e3\u538b tar -xzvf stdiscosrv-linux-amd64-*version*.tar.gz Syncthing Relay Server \u4e0b\u8f7dstrelaysrv wget https://github.com/syncthing/relaysrv/releases/download/*version*/strelaysrv-linux-amd64-*version*.tar.gz \u89e3\u538b tar -xzvf strelaysrv-linux-amd64-*version*.tar.gz \u653e\u5165 /usr/bin/relaysrv \u65b9\u4fbf\u76f4\u63a5\u8fd0\u884c(\u987a\u4fbf\u6539\u4e2a\u540d) mv strelaysrv-linux-amd64-*version*/strelaysrv /usr/bin/relaysrv \u6e05\u7406\u5b89\u88c5\u5305 rm -rf strelaysrv-linux-amd64-*version* strelaysrv-linux-amd64-*version*.tar.gz useradd relaysrv -s /bin/false #\u521b\u5efa\u5b58\u50a8\u914d\u7f6e\u7528\u7684\u76ee\u5f55\u5e76\u4fee\u6539\u6240\u6709\u8005 mkdir /etc/relaysrv chown relaysrv /etc/relaysrv \u5728 /etc/supervisord.conf \u6587\u6863\u6700\u540e\u52a0\u4e0a\u4e0b\u9762\u8fd9\u6bb5\u8bbe\u7f6e [program:relaysrv] command=relaysrv -keys /etc/relaysrv -pools=\"\" autostart=true autorestart=true startsecs=10 stdout_logfile=/var/log/relaysrv.log stdout_logfile_maxbytes=1MB stdout_logfile_backups=10 stdout_capture_maxbytes=1MB redirect_stderr=true user = root [program:discosrv] command=discosrv /etc/discosrv user = root autostart=true autorestart=true redirect_stderr=true startsecs=10 stdout_logfile=/var/log/discosrv.log stdout_logfile_maxbytes=1MB stdout_logfile_backups=2 stdout_capture_maxbytes=1MB #program\u540e\u9762\u8ddf\u670d\u52a1\u7684\u540d\u79f0 #command\u662f\u7a0b\u5e8f\u7684\u6267\u884c\u8def\u5f84 #autorstart\u662f\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u968fsupervisor\u7684\u542f\u52a8\u800c\u542f\u52a8 #stdout_logfile\u662f\u6355\u83b7\u6807\u51c6\u8f93\u51fa\u3002 \u4e5f\u53ef\u4ee5\u9009\u62e9\u52a0\u4e0a [include]files = /etc/supervisor/conf.d/*.ini\uff08\u6b64\u5730\u5740\u6587\u4ef6\u4e2d\u653e\u7f6e\u4e0a\u6bb5\u8bbe\u7f6e\uff09 relaysrv\u542f\u52a8\u914d\u7f6e -debug \u542f\u7528\u8c03\u8bd5\u8f93\u51fa-ext-address=<address> \u53ef\u9009\u7684\u5916\u90e8\u5730\u5740(\u5c06\u88ab\u4e0a\u62a5)\uff0c\u80fd\u591f\u901a\u8fc7\u7aef\u53e3\u8f6c\u53d1\u6765\u76d1\u542c\u9ad8\u6743\u9650\u7aef\u53e3(0-1024)\u7136\u540e\u5916\u90e8\u53ef\u4ee5\u8fde\u63a5\u8fd9\u4e2a\u7aef\u53e3-global-rate=<bytes/s> \u5168\u5c40\u9650\u901f\uff0c\u5355\u4f4d bytes/s-keys=<dir> \u7528\u4e8e\u5b58\u50a8 cert.pem \u548c key.pem \u7684\u76ee\u5f55\uff0c\u9ed8\u8ba4\u662f \".\"(\u5f53\u524d\u76ee\u5f55)-listen=<listen addr> \u534f\u8bae\u76d1\u542c\u7684\u5730\u5740\uff0c\u9ed8\u8ba4\u662f \":22067\"-message-timeout=<duration> \u7b49\u5f85\u6d88\u606f\u5230\u8fbe\u7684\u6700\u5927\u65f6\u95f4(\u9ed8\u8ba4 1m0s)-nat \u4f7f\u7528UPnP/NAT-PMP\u6765\u53d6\u5f97\u5916\u90e8\u7aef\u53e3\u6620\u5c04-nat-lease=<duration> NAT\u79df\u8d41\u65f6\u95f4\uff0c\u5355\u4f4d\u5206\u949f(\u9ed8\u8ba4 60)-nat-renewal=<duration> NAT\u5237\u65b0\u9891\u7387\uff0c\u5355\u4f4d\u5206\u949f(\u9ed8\u8ba4 30)-nat-timeout=<duration> NAT\u53d1\u73b0\u8d85\u65f6\uff0c\u5355\u4f4d\u79d2(\u9ed8\u8ba4 10)-network-timeout=<duration> \u5ba2\u6237\u7aef\u548c\u4e2d\u7ee7\u4e4b\u95f4\u7f51\u7edc\u64cd\u4f5c\u7684\u8d85\u65f6\uff0c\u5982\u679c\u5728\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u5185\u5ba2\u6237\u7aef\u548c\u4e2d\u7ee7\u4e4b\u95f4\u6ca1\u6709\u6570\u636e\u88ab\u63a5\u6536\u5230\uff0c\u90a3\u4e48\u8fde\u63a5\u5c06\u88ab\u7ec8\u6b62\u3002\u6b64\u5916\uff0c\u5982\u679c\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4efb\u4f55\u88ab\u4e2d\u7ee7\u7684\u5ba2\u6237\u7aef\u6ca1\u6709\u6570\u636e\u53d1\u9001\uff0c\u8fd9\u4e2a\u4f1a\u8bdd\u4e5f\u4f1a\u88ab\u7ec8\u6b62(\u9ed8\u8ba4 2m0s)-per-session-rate=<bytes/s> \u6bcf\u4e2a\u4f1a\u8bdd\u7684\u9650\u901f\uff0c\u5355\u4f4d bytes/s-ping-interval=<duration> ping\u7684\u53d1\u9001\u95f4\u9694(\u9ed8\u8ba4 1m0s)-pools=<pool addresses> \u4e2d\u7ee7\u670d\u52a1\u5668\u6c60\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u591a\u4e2a(\u9ed8\u8ba4 \"http://relays.syncthing.net/endpoint\")\u3002\u7559\u7a7a(-pools=\"\")\u6765\u7981\u6b62\u516c\u5e03\u8fd9\u4e2a\u670d\u52a1\u5668\u5230\u6c60\u4e2d\uff0c\u4ee5\u4fbf\u4f5c\u4e3a\u79c1\u6709\u4e2d\u7ee7\u3002-protocol=<string> \u76d1\u542c\u534f\u8bae\uff0c\"tcp\"\u6765\u76d1\u542cIPv4\u548cIPv6\uff0c\"tcp4\"\u6765\u76d1\u542cIPv4\uff0c\"tcp6\"\u6765\u76d1\u542cIPv6(\u9ed8\u8ba4 \"tcp\")-provided-by=<string> \u4e00\u4e2a\u53ef\u9009\u7684\u63cf\u8ff0\u5b57\u6bb5\u6765\u8868\u793a\u8c01\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u4e2d\u7ee7(\u53ef\u4ee5\u6253\u6253\u5e7f\u544a\u5565\u7684)-status-srv=<listen addr> \u63d0\u4f9b\u72b6\u6001\u670d\u52a1\u7684\u76d1\u542c\u5730\u5740(\u9ed8\u8ba4 \":22070\")\uff0c\u7528\u4e8e\u4e2d\u7ee7\u670d\u52a1\u5668\u6c60\u9875\u9762\u6765\u5c55\u793a\u670d\u52a1\u5668\u72b6\u6001(\u4f20\u8f93\u4e86\u591a\u5c11\u6570\u636e\uff0c\u6709\u591a\u5c11\u5ba2\u6237\u7aef\u5728\u7ebf\u7b49\u7b49)\uff0c\u7559\u7a7a(-status-srv=\"\")\u6765\u7981\u7528\u8fd9\u4e2a\u529f\u80fd-pools=\"\" \u5e26\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 supervisord -c /etc/supervisor/supervisor.conf","title":"Syncthing"},{"location":"Syncthing/#syncthing-discovery-server","text":"\u4e0b\u8f7d stdiscosrv \u5305 wget https://github.com/syncthing/discosrv/releases/download/*version*/stdiscosrv-linux-amd64-*version*.tar.gz \u89e3\u538b tar -xzvf stdiscosrv-linux-amd64-*version*.tar.gz","title":"Syncthing Discovery Server"},{"location":"Syncthing/#syncthing-relay-server","text":"\u4e0b\u8f7dstrelaysrv wget https://github.com/syncthing/relaysrv/releases/download/*version*/strelaysrv-linux-amd64-*version*.tar.gz \u89e3\u538b tar -xzvf strelaysrv-linux-amd64-*version*.tar.gz \u653e\u5165 /usr/bin/relaysrv \u65b9\u4fbf\u76f4\u63a5\u8fd0\u884c(\u987a\u4fbf\u6539\u4e2a\u540d) mv strelaysrv-linux-amd64-*version*/strelaysrv /usr/bin/relaysrv \u6e05\u7406\u5b89\u88c5\u5305 rm -rf strelaysrv-linux-amd64-*version* strelaysrv-linux-amd64-*version*.tar.gz useradd relaysrv -s /bin/false #\u521b\u5efa\u5b58\u50a8\u914d\u7f6e\u7528\u7684\u76ee\u5f55\u5e76\u4fee\u6539\u6240\u6709\u8005 mkdir /etc/relaysrv chown relaysrv /etc/relaysrv \u5728 /etc/supervisord.conf \u6587\u6863\u6700\u540e\u52a0\u4e0a\u4e0b\u9762\u8fd9\u6bb5\u8bbe\u7f6e [program:relaysrv] command=relaysrv -keys /etc/relaysrv -pools=\"\" autostart=true autorestart=true startsecs=10 stdout_logfile=/var/log/relaysrv.log stdout_logfile_maxbytes=1MB stdout_logfile_backups=10 stdout_capture_maxbytes=1MB redirect_stderr=true user = root [program:discosrv] command=discosrv /etc/discosrv user = root autostart=true autorestart=true redirect_stderr=true startsecs=10 stdout_logfile=/var/log/discosrv.log stdout_logfile_maxbytes=1MB stdout_logfile_backups=2 stdout_capture_maxbytes=1MB #program\u540e\u9762\u8ddf\u670d\u52a1\u7684\u540d\u79f0 #command\u662f\u7a0b\u5e8f\u7684\u6267\u884c\u8def\u5f84 #autorstart\u662f\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u968fsupervisor\u7684\u542f\u52a8\u800c\u542f\u52a8 #stdout_logfile\u662f\u6355\u83b7\u6807\u51c6\u8f93\u51fa\u3002 \u4e5f\u53ef\u4ee5\u9009\u62e9\u52a0\u4e0a [include]files = /etc/supervisor/conf.d/*.ini\uff08\u6b64\u5730\u5740\u6587\u4ef6\u4e2d\u653e\u7f6e\u4e0a\u6bb5\u8bbe\u7f6e\uff09 relaysrv\u542f\u52a8\u914d\u7f6e -debug \u542f\u7528\u8c03\u8bd5\u8f93\u51fa-ext-address=<address> \u53ef\u9009\u7684\u5916\u90e8\u5730\u5740(\u5c06\u88ab\u4e0a\u62a5)\uff0c\u80fd\u591f\u901a\u8fc7\u7aef\u53e3\u8f6c\u53d1\u6765\u76d1\u542c\u9ad8\u6743\u9650\u7aef\u53e3(0-1024)\u7136\u540e\u5916\u90e8\u53ef\u4ee5\u8fde\u63a5\u8fd9\u4e2a\u7aef\u53e3-global-rate=<bytes/s> \u5168\u5c40\u9650\u901f\uff0c\u5355\u4f4d bytes/s-keys=<dir> \u7528\u4e8e\u5b58\u50a8 cert.pem \u548c key.pem \u7684\u76ee\u5f55\uff0c\u9ed8\u8ba4\u662f \".\"(\u5f53\u524d\u76ee\u5f55)-listen=<listen addr> \u534f\u8bae\u76d1\u542c\u7684\u5730\u5740\uff0c\u9ed8\u8ba4\u662f \":22067\"-message-timeout=<duration> \u7b49\u5f85\u6d88\u606f\u5230\u8fbe\u7684\u6700\u5927\u65f6\u95f4(\u9ed8\u8ba4 1m0s)-nat \u4f7f\u7528UPnP/NAT-PMP\u6765\u53d6\u5f97\u5916\u90e8\u7aef\u53e3\u6620\u5c04-nat-lease=<duration> NAT\u79df\u8d41\u65f6\u95f4\uff0c\u5355\u4f4d\u5206\u949f(\u9ed8\u8ba4 60)-nat-renewal=<duration> NAT\u5237\u65b0\u9891\u7387\uff0c\u5355\u4f4d\u5206\u949f(\u9ed8\u8ba4 30)-nat-timeout=<duration> NAT\u53d1\u73b0\u8d85\u65f6\uff0c\u5355\u4f4d\u79d2(\u9ed8\u8ba4 10)-network-timeout=<duration> \u5ba2\u6237\u7aef\u548c\u4e2d\u7ee7\u4e4b\u95f4\u7f51\u7edc\u64cd\u4f5c\u7684\u8d85\u65f6\uff0c\u5982\u679c\u5728\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u5185\u5ba2\u6237\u7aef\u548c\u4e2d\u7ee7\u4e4b\u95f4\u6ca1\u6709\u6570\u636e\u88ab\u63a5\u6536\u5230\uff0c\u90a3\u4e48\u8fde\u63a5\u5c06\u88ab\u7ec8\u6b62\u3002\u6b64\u5916\uff0c\u5982\u679c\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4efb\u4f55\u88ab\u4e2d\u7ee7\u7684\u5ba2\u6237\u7aef\u6ca1\u6709\u6570\u636e\u53d1\u9001\uff0c\u8fd9\u4e2a\u4f1a\u8bdd\u4e5f\u4f1a\u88ab\u7ec8\u6b62(\u9ed8\u8ba4 2m0s)-per-session-rate=<bytes/s> \u6bcf\u4e2a\u4f1a\u8bdd\u7684\u9650\u901f\uff0c\u5355\u4f4d bytes/s-ping-interval=<duration> ping\u7684\u53d1\u9001\u95f4\u9694(\u9ed8\u8ba4 1m0s)-pools=<pool addresses> \u4e2d\u7ee7\u670d\u52a1\u5668\u6c60\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\u591a\u4e2a(\u9ed8\u8ba4 \"http://relays.syncthing.net/endpoint\")\u3002\u7559\u7a7a(-pools=\"\")\u6765\u7981\u6b62\u516c\u5e03\u8fd9\u4e2a\u670d\u52a1\u5668\u5230\u6c60\u4e2d\uff0c\u4ee5\u4fbf\u4f5c\u4e3a\u79c1\u6709\u4e2d\u7ee7\u3002-protocol=<string> \u76d1\u542c\u534f\u8bae\uff0c\"tcp\"\u6765\u76d1\u542cIPv4\u548cIPv6\uff0c\"tcp4\"\u6765\u76d1\u542cIPv4\uff0c\"tcp6\"\u6765\u76d1\u542cIPv6(\u9ed8\u8ba4 \"tcp\")-provided-by=<string> \u4e00\u4e2a\u53ef\u9009\u7684\u63cf\u8ff0\u5b57\u6bb5\u6765\u8868\u793a\u8c01\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u4e2d\u7ee7(\u53ef\u4ee5\u6253\u6253\u5e7f\u544a\u5565\u7684)-status-srv=<listen addr> \u63d0\u4f9b\u72b6\u6001\u670d\u52a1\u7684\u76d1\u542c\u5730\u5740(\u9ed8\u8ba4 \":22070\")\uff0c\u7528\u4e8e\u4e2d\u7ee7\u670d\u52a1\u5668\u6c60\u9875\u9762\u6765\u5c55\u793a\u670d\u52a1\u5668\u72b6\u6001(\u4f20\u8f93\u4e86\u591a\u5c11\u6570\u636e\uff0c\u6709\u591a\u5c11\u5ba2\u6237\u7aef\u5728\u7ebf\u7b49\u7b49)\uff0c\u7559\u7a7a(-status-srv=\"\")\u6765\u7981\u7528\u8fd9\u4e2a\u529f\u80fd-pools=\"\" \u5e26\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 supervisord -c /etc/supervisor/supervisor.conf","title":"Syncthing Relay Server"},{"location":"about/","text":"","title":"About"},{"location":"nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86GIthubPage/","text":"DNS\u91cd\u5b9a\u5411 \u914d\u7f6eDNS\u91cd\u5b9a\u5411\u5230\u76ee\u6807\u670d\u52a1\u5668\u3002 nginx server { listen 80; server_name \u57df\u540d; rewrite ^(.*)$ https://$host$request_uri permanent; } server { listen 443 ssl http2; server_name \u57df\u540d; location / { proxy_pass http://******.github.io; proxy_set_header X-Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header User-Agent \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36\"; #\u7f13\u5b58 proxy_cache_valid 200 206 304 301 302 1d; #\u5bf9httpcode\u4e3a200\u2026\u7684\u7f13\u5b581\u5929 proxy_cache_valid any 1d; #\u5176\u4ed6\u7684\u7f13\u5b58\u591a\u957f\u65f6\u95f4 proxy_cache_key $uri; #\u5b9a\u4e49\u7f13\u5b58\u552f\u4e00key,\u901a\u8fc7\u552f\u4e00key\u6765\u8fdb\u884chash\u5b58\u53d6 } access_log off; #access_log end error_log off; #error_log end } \u914d\u7f6e\u8bf4\u660e\uff1a proxy_set_header Host $host \u8bbe\u7f6e\u8bf7\u6c42\u5934\u7684Host\u4e3a\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668\u7684Host proxy_set_header X-Real-IP $remote_addr \u8bbe\u7f6e\u8bf7\u6c42\u5934\u7684X-Real-IP\u4e3a\u5ba2\u6237\u7aef\u771f\u5b9eIP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for \u628a\u8bf7\u6c42\u6765\u6e90\u7684IP\u6dfb\u52a0\u5230\u8bf7\u6c42\u5934\u7684X-Forwarded-For\u5b57\u6bb5 X-Forwarded-For:\u7b80\u79f0XFF\u5934\uff0c\u5b83\u4ee3\u8868\u5ba2\u6237\u7aef\uff0c\u4e5f\u5c31\u662fHTTP\u7684\u8bf7\u6c42\u7aef\u771f\u5b9e\u7684IP\uff0c\u53ea\u6709\u5728\u901a\u8fc7\u4e86HTTP\u4ee3\u7406\u6216\u8005\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\u5668\u65f6\u624d\u4f1a\u6dfb\u52a0\u8be5\u9879\u3002 \u5b83\u4e0d\u662fRFC\u4e2d\u5b9a\u4e49\u7684\u6807\u51c6\u8bf7\u6c42\u5934\u4fe1\u606f\uff0c\u5728squid\u7f13\u5b58\u4ee3\u7406\u670d\u52a1\u5668\u5f00\u53d1\u6587\u6863\u4e2d\u53ef\u4ee5\u627e\u5230\u8be5\u9879\u7684\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u6807\u51c6\u683c\u5f0f\u5982\u4e0b\uff1aX-Forwarded-For: client1, proxy1, proxy2\u3002 \u53c2\u8003 \uff1a \u8840\u886b\u975e\u5f27","title":"Nginx"},{"location":"nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86GIthubPage/#dns","text":"\u914d\u7f6eDNS\u91cd\u5b9a\u5411\u5230\u76ee\u6807\u670d\u52a1\u5668\u3002","title":"DNS\u91cd\u5b9a\u5411"},{"location":"nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86GIthubPage/#nginx","text":"server { listen 80; server_name \u57df\u540d; rewrite ^(.*)$ https://$host$request_uri permanent; } server { listen 443 ssl http2; server_name \u57df\u540d; location / { proxy_pass http://******.github.io; proxy_set_header X-Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header User-Agent \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36\"; #\u7f13\u5b58 proxy_cache_valid 200 206 304 301 302 1d; #\u5bf9httpcode\u4e3a200\u2026\u7684\u7f13\u5b581\u5929 proxy_cache_valid any 1d; #\u5176\u4ed6\u7684\u7f13\u5b58\u591a\u957f\u65f6\u95f4 proxy_cache_key $uri; #\u5b9a\u4e49\u7f13\u5b58\u552f\u4e00key,\u901a\u8fc7\u552f\u4e00key\u6765\u8fdb\u884chash\u5b58\u53d6 } access_log off; #access_log end error_log off; #error_log end } \u914d\u7f6e\u8bf4\u660e\uff1a proxy_set_header Host $host \u8bbe\u7f6e\u8bf7\u6c42\u5934\u7684Host\u4e3a\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668\u7684Host proxy_set_header X-Real-IP $remote_addr \u8bbe\u7f6e\u8bf7\u6c42\u5934\u7684X-Real-IP\u4e3a\u5ba2\u6237\u7aef\u771f\u5b9eIP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for \u628a\u8bf7\u6c42\u6765\u6e90\u7684IP\u6dfb\u52a0\u5230\u8bf7\u6c42\u5934\u7684X-Forwarded-For\u5b57\u6bb5 X-Forwarded-For:\u7b80\u79f0XFF\u5934\uff0c\u5b83\u4ee3\u8868\u5ba2\u6237\u7aef\uff0c\u4e5f\u5c31\u662fHTTP\u7684\u8bf7\u6c42\u7aef\u771f\u5b9e\u7684IP\uff0c\u53ea\u6709\u5728\u901a\u8fc7\u4e86HTTP\u4ee3\u7406\u6216\u8005\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\u5668\u65f6\u624d\u4f1a\u6dfb\u52a0\u8be5\u9879\u3002 \u5b83\u4e0d\u662fRFC\u4e2d\u5b9a\u4e49\u7684\u6807\u51c6\u8bf7\u6c42\u5934\u4fe1\u606f\uff0c\u5728squid\u7f13\u5b58\u4ee3\u7406\u670d\u52a1\u5668\u5f00\u53d1\u6587\u6863\u4e2d\u53ef\u4ee5\u627e\u5230\u8be5\u9879\u7684\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u6807\u51c6\u683c\u5f0f\u5982\u4e0b\uff1aX-Forwarded-For: client1, proxy1, proxy2\u3002 \u53c2\u8003 \uff1a \u8840\u886b\u975e\u5f27","title":"nginx"}]}